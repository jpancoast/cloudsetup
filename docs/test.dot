digraph G {
    rankdir=LR

    subgraph cluster1 {
        label="The World";
        Internet;
#        host1;
    }
    subgraph cluster2 {
#        label="Remote Datacenter";
        "Private VPC 1";
        "Private VPC 2";
        "Private VPC 3";

        {
            rank="same"
            "Private VPC 1";"Private VPC 2";"Private VPC 3";
        }
    }

    subgraph cluster3
    {
        label="Management VPC"
        "Logging subnet";
        "Monitoring subnet";
        "Management subnet";

        {
            rank="same";
            "Logging subnet";
            "Monitoring subnet";
            "Management subnet";
        }
    }

    subgraph cluster4
    {
        "Private / VPN"

        {
            rank="max";
            "Private / VPN";
        }
    }


    Internet -> "Private VPC 1" [constraint=false];
    Internet -> "Private VPC 2";
    Internet -> "Private VPC 3"[constraint=false];

    "Private VPC 1" -> "Private VPC 2"[dir="both"];
    "Private VPC 1" -> "Private VPC 3"[dir="both"];
    "Private VPC 2" -> "Private VPC 3"[dir="both"];

    "Private VPC 1" -> "Logging subnet";
    "Private VPC 2" -> "Logging subnet";
    "Private VPC 3" -> "Logging subnet";

    "Monitoring subnet" -> "Private VPC 1"[constraint=false];
    "Monitoring subnet" -> "Private VPC 2";
    "Monitoring subnet" -> "Private VPC 3";

    "Management subnet" -> "Private VPC 1"[dir="both" constraint=false];
    "Management subnet" -> "Private VPC 2"[dir="both" constraint=false];
    "Management subnet" -> "Private VPC 3"[dir="both" constraint=false];

    "Management subnet" -> "Logging subnet";
    "Management subnet" -> "Monitoring subnet";

    "Management subnet" -> "Private / VPN" [style="invis"]
    "Monitoring subnet" -> "Private / VPN" [style="invis"]
    "Logging subnet" -> "Private / VPN" [style="invis"]

    "Private / VPN" -> "Management subnet"[constraint=false];
    "Private / VPN" -> "Monitoring subnet"[constraint=false];
    "Private / VPN" -> "Logging subnet";
}