digraph G {
    rankdir=LR
    
    Internet [ color = blue, style = filled ]
    "Monitoring subnet" [ color = green, style = filled ]
    "Logging subnet" [ color = red, style = filled ]
    "Devops subnet" [ color = "chartreuse4", style = filled ]

    "Public VPC 1" [ color = "darkorchid1", style = filled ]
    "Public VPC 2" [ color = "darkorchid1", style = filled ]
    "Public VPC ... N" [ color = "darkorchid1", style = filled ]

    "Private / VPN" [ color = "brown4", style = filled ]


    ranksep = 2.0
    nodesep = .5


    subgraph cluster1 
    {
        style="invis"
        Internet;
    }

    subgraph cluster2 
    {
        style="invis"

        "Public VPC 1";
        "Public VPC 2";
        "Public VPC ... N";

        {
            rank="same"
            "Public VPC 1";"Public VPC 2";"Public VPC ... N";
        }
    }

    subgraph cluster3
    {
        label="Management VPC"
        "Logging subnet";
        "Monitoring subnet";
        "Devops subnet";

        {
            rank="same";
            "Logging subnet";
            "Monitoring subnet";
            "Devops subnet";
        }
    }

    subgraph cluster4
    {
        style="invis"
        "Private / VPN"

        {
            rank="max";
            "Private / VPN";
        }
    }


    Internet -> "Public VPC 1" [dir=both color="blue:darkorchid1" constraint=false];
    Internet -> "Public VPC 2" [dir=both color="blue:darkorchid1"];
    Internet -> "Public VPC ... N" [dir=both color="blue:darkorchid1" constraint=false];

    "Public VPC 1" -> "Public VPC 2"[dir=both color="darkorchid1:darkorchid1"];
    "Public VPC 1" -> "Public VPC ... N"[dir=both color="darkorchid1:darkorchid1"];
    "Public VPC 2" -> "Public VPC ... N"[dir=both color="darkorchid1:darkorchid1"];

    "Public VPC 1" -> "Logging subnet"[ color = "darkorchid1" ];
    "Public VPC 2" -> "Logging subnet"[ color = "darkorchid1" ];
    "Public VPC ... N" -> "Logging subnet"[ color = "darkorchid1" ];

    "Monitoring subnet" -> "Public VPC 1"[ color="green" constraint=false];
    "Monitoring subnet" -> "Public VPC 2"[ color="green"];
    "Monitoring subnet" -> "Public VPC ... N"[ color="green"];

    "Devops subnet" -> "Public VPC 1"[constraint=false color="blue"];
    "Devops subnet" -> "Public VPC 2"[constraint=false color="blue"];
    "Devops subnet" -> "Public VPC ... N"[constraint=false color="blue"];

    "Devops subnet" -> "Logging subnet" [ color="blue" ];
    "Devops subnet" -> "Monitoring subnet"[ color="blue" ];

    "Devops subnet" -> "Private / VPN" [style="invis"]
    "Monitoring subnet" -> "Private / VPN" [style="invis"]
    "Logging subnet" -> "Private / VPN" [style="invis"]

    "Private / VPN" -> "Devops subnet"[constraint=false];
    "Private / VPN" -> "Monitoring subnet"[constraint=false];
    "Private / VPN" -> "Logging subnet";
}